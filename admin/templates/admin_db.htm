{include file='page_header.htm'}
<div class="msg_r" id="msg"></div>
<!--{if $smarty.get.action=='resume'}-->
<div class="pos-div">
	<form name="importform" method="post" action="{$smarty.server.PHP_SELF}?action=import" enctype="multipart/form-data" onsubmit="if(!this.sqlfile.value)return false;">
	本地文件：<input type="file" size="40" name="sqlfile" style="height:24px; vertical-align:middle;" />
	<span class="btn btn-dft" onclick="window.document.importform.submit()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.export}</span></span>
	</form>
</div>
<div class="main-div">
   <div class="toolbar">
		<span class="btn btn-dft" onclick="document.files.submit()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.resume}</span></span>
		<span class="btn btn-dft" onclick="Location('{$smarty.server.PHP_SELF}')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.data_backup}</span></span>
		<span class="btn btn-dft" onclick="document.location.reload()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.refresh}</span></span>
   </div>
   <table width="100%" border="0" cellspacing="0" cellpadding="0" class="list">
    <form name="files" action="{$smarty.server.PHP_SELF}?action=resumefiles" method="post">
     <tr>
       <th scope="col" width="20"><input type="checkbox" onclick="checkAll(this,'file[]')" /></th>
       <th scope="col">{$lang.filename}</th>
       <th scope="col" width="100">{$lang.filesize}</th>
       <th scope="col" width="140" class="last">{$lang.filetime}</th>
     </tr>
	 <!--{if $folders}-->
	 <!--{foreach from=$folders item=dir}-->
     <tr onmouseover="this.className='active'" onmouseout="this.className=''">
       <td>&nbsp;</td>
	   <td><a href="{$dir.folderlink}"><img src="{$dir.img}" border="0" /> {$dir.filename}</a></td>
       <td>&nbsp;</td>
       <td>&nbsp;</td>
     </tr>
	 <!--{/foreach}-->
	 <!--{/if}-->
	 <!--{if $folders}-->
	 <!--{foreach from=$filetree item=tree}-->
     <tr onmouseover="this.className='active'" onmouseout="this.className=''">
       <td><input type="checkbox" name="file[]" value="{$tree.filepath}" onclick="checkThis(this)" /></td>
	   <td><img src="{$tree.img}" border="0" /> {$tree.filename}</td>
       <td>{$tree.filesize}</td>
       <td>{$tree.filetime}</td>
     </tr>
	 <!--{/foreach}-->
	 <!--{/if}-->
	 </form>
	  <tr>
		  <td colspan="4">{$lang.select}：
			<a href="javascript:;" onclick="selectAll('file[]')">{$lang.selectall}</a> - 
			<a href="javascript:;" onclick="cancelAll('file[]')">{$lang.noselect}</a> - 
			<a href="javascript:;" onclick="reverseAll('file[]')">{$lang.reverseselect}</a>
		 </td>
	  </tr>
   </table>
   <div class="toolbar">
		<span class="btn btn-dft" onclick="document.files.submit()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.resume}</span></span>
		<span class="btn btn-dft" onclick="Location('{$smarty.server.PHP_SELF}')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.data_backup}</span></span>
		<span class="btn btn-dft" onclick="document.location.reload()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.refresh}</span></span>
   </div>
</div>
<!--{else}-->
<div class="main-div">
<div class="toolbar">
    <span class="btn btn-dft" onclick="document.tables.submit()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.bak_start}</span></span>
	<span class="btn btn-dft" onclick="checkDB('optimiz')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className=' btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.db_optimiz}</span></span>
	<span class="btn btn-dft" onclick="checkDB('repair')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.db_repair}</span></span>
	<span class="btn btn-dft" onclick="Location('{$smarty.server.PHP_SELF}?action=resume')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.data_resume}</span></span>
	<span class="btn btn-dft" onclick="window.location.reload()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.refresh}</span></span>
</div>
<form method="post" name="tables" action="{$smarty.server.PHP_SELF}?action=export">
<table width="100%" border="0" cellspacing="0" cellpadding="0" class="list">
  <tr>
    <th scope="col" width="20"><input type="checkbox" onclick="checkAll(this,'table[]')" /></th>
    <th scope="col">{$lang.tb_name}</th>
    <th scope="col" width="60">{$lang.tb_type}</th>
	<th scope="col" width="100">{$lang.tb_rowformat}</th>
    <th scope="col" width="60">{$lang.tb_records}</th>
    <th scope="col" width="80">{$lang.tb_data}</th>
    <th scope="col" width="60">{$lang.tb_index}</th>
    <th scope="col" width="60">{$lang.tb_free}</th>
    <th scope="col" width="60" class="last">{$lang.handler}{$lang.options}</th>
  </tr>
  <!--{foreach from=$tables item=table}-->
  <tr onmouseover="this.className='active'" onmouseout="this.className=''">
    <td><input type="checkbox" name="table[]" value="{$table.Name}" onclick="checkThis(this)" /></td>
    <td>{$table.Name}</td>
    <td>{$table.Engine}</td>
	<td>{$table.Row_format}</td>
    <td>{$table.Rows}</td>
    <td>{$table.Data_length}</td>
    <td>{$table.Index_length}</td>
    <td>{$table.Data_free}</td>
    <td><a href="javascript:;" onclick="checkOneDB('{$table.Name}','repair')">{$lang.repair}</a> <a href="javascript:;" onclick="checkOneDB('{$table.Name}','optimiz')">{$lang.optimiz}</a></td>
  </tr>
  <!--{/foreach}-->
  <tr>
      <td colspan="9">
	    <span style="float:right; margin-right:10px;">{$tbcount}，{$lang.db_space}{$dbsize}MB。</span>
		{$lang.select}：
		<a href="javascript:;" onclick="selectAll('table[]')">{$lang.selectall}</a> - 
		<a href="javascript:;" onclick="cancelAll('table[]')">{$lang.noselect}</a> - 
		<a href="javascript:;" onclick="reverseAll('table[]')">{$lang.reverseselect}</a>
	 </td>
  </tr>
</table>
</form>
<div class="toolbar">
    <span class="btn btn-dft" onclick="document.tables.submit()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.bak_start}</span></span>
	<span class="btn btn-dft" onclick="checkDB('optimiz')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className=' btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.db_optimiz}</span></span>
	<span class="btn btn-dft" onclick="checkDB('repair')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.db_repair}</span></span>
	<span class="btn btn-dft" onclick="Location('{$smarty.server.PHP_SELF}?action=resume')" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.data_resume}</span></span>
	<span class="btn btn-dft" onclick="window.location.reload()" onmouseover="this.className='btn btn-hover'" onmouseup="this.className='btn btn-hover'" onmousedown="this.className='btn btn-active'" onmouseout="this.className='btn btn-dft'" tabindex="0"><span>{$lang.refresh}</span></span>
</div>
</div>
<!--{/if}-->